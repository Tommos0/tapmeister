<html><head><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>TapMeister</title> <script>const ce=(e,t={},n=[])=>{const o=document.createElementNS("http://www.w3.org/2000/svg",e);return Object.keys(t).forEach(e=>o.setAttribute(e,t[e])),n.forEach(e=>o.appendChild(e)),o};window.addEventListener("DOMContentLoaded",async()=>{let e,t,n,o,i,a=2,l=1,c=!0,r=0,s=parseInt(localStorage.getItem("highScore"))||0,d=null;const m=document.getElementById("menu"),u=document.querySelector("svg"),g=new Map,y=new AudioContext,h=y.createOscillator(),p=y.createGain();h.connect(p),p.connect(y.destination),p.gain.value=0,h.start(0);const w=()=>{document.getElementById("high_score").innerText=s.toString(),document.getElementById("last_score").innerText=r.toString()},T=()=>{e=window.innerWidth,t=window.innerHeight,n=e<t?1:e/t,o=t<e?1:t/e,document.body.style.padding=e<t?"10vw":"10vh"};T(),window.onresize=T;const v=()=>{c=!0,clearTimeout(d),g.forEach(e=>{clearTimeout(e.timeout)}),clearInterval(i),setTimeout(()=>{r>s&&(s=r,localStorage.setItem("highScore",s.toString())),w(),m.style.display="block",u.style.display="none"},1e3)},E=()=>{const e=ce("circle",{cx:50+100*n*(Math.random()-.5),cy:50+100*o*(Math.random()-.5),r:"10",style:`transition: opacity ${a}s ease-in, fill ${a}s ease-in`}),t={element:e,timeout:null};t.timeout=setTimeout(v,1e3*a),g.set(e,t),e.onclick=(e=>(e=>{c||(r+=1,p.gain.value=1,p.gain.exponentialRampToValueAtTime(1e-5,y.currentTime+.1),clearTimeout(e.timeout),g.delete(e.element),u.removeChild(e.element))})(g.get(e.target))),u.appendChild(e),setTimeout(()=>e.classList.add("disappear"),50),d=setTimeout(E,1e3*l)};document.getElementById("start").onclick=(()=>{r=0,c=!1,u.innerHTML="",a=4,l=2,i=setInterval(()=>l*=.99,1e3),m.style.display="none",u.style.display="block",d=E()}),w()});</script> <style>html,body,svg{width:100%;height:100%;border:0;padding:0;margin:0;box-sizing:border-box;overflow:visible}#menu{text-align:center;font-family:sans-serif;font-size:16pt}button{height:100px;width:100px}svg{display:none}circle{fill:black;opacity:0}.disappear{opacity:1;fill:red}</style></head><body><div id="menu"><h1>TapMeister</h1><div><h2>High score: <span id="high_score">0</span></h2></div><div><h2>Last score: <span id="last_score">0</span></h2></div> <button type="button" id="start" value="start"><h2>Start</h2></button></div> <svg viewBox="0 0 100 100"> </svg></body></html>
